<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Sun Apr 09 2023 09:11:23 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="643280ea5127ec6609a8c77d" data-wf-site="643280ea5127ec914ea8c775">
<head>
  

  <meta charset="utf-8">
  <title>View Requests</title>
  <meta content="View Requests" property="og:title">
  <meta content="View Requests" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/finfund-53bba7-1c67b0c2132d78c2591091c1.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Inter:regular,500,600,700,800,900"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="navbar-logo-left wf-section">
    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-left-container shadow-three w-nav">
      <div class="container">
        <div class="navbar-wrapper">
          <a href="index.html" class="navbar-brand w-nav-brand"><img src="./images/FinFund---Logo_1FinFund - Logo.png" loading="lazy" width="40" alt=""></a>
          <nav role="navigation" class="nav-menu-wrapper w-nav-menu">
            <ul role="list" class="nav-menu-two w-list-unstyled">
              <li>
                <a href="#" class="nav-link">DASHBOARD</a>
              </li>
              <li>
                <div class="nav-divider"></div>
              </li>
              <li>
                <button class="nav-link" id="logout">LOGOUT</button>
              </li>
              <li>
                <div class="nav-divider"></div>
              </li>
              <li class="mobile-margin-top-10">
                <a href="register.html" class="button-nav w-button">vIEW TRANSACTIONS &gt;</a>
              </li>
            </ul>
          </nav>
          <div class="menu-button w-nav-button">
            <div class="w-icon-nav-menu"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="section is--hero wf-section">
    <div class="container w-container">
      <div class="headwrap">
        <h3 class="heading-3">Welcome to <span class="h3-span">FinFund.</span></h3>
        <h1 class="heading-1" id="username"></h1>
        <p class="paragraph-1 is--hero" id="email"></p>
        <p class="paragraph-1 is--hero" id="walletaddress"><span class="greenspan">Wallet Address</span> : 0x12r456HJ9</p>
        
      </div>
    </div>
  </div>
  <div class="section is--funds wf-section">
    <div class="container w-container">
      <div class="headwrap">
        <h1 class="heading-1">Requests</h1>
        <p class="paragraph-1 is--hero">View the status of various requests you made.</p>
      </div>
      <div class="fundwrap is--admin" id="fundwrap">
        <div class="fund-requests">
          <div class="contentwrap"></div>
          <div class="headwrap is--adminfunds">
            <p class="paragraph-1 is--funds">
              <a href="#" class="inlink">Loading...</a>
            </p>
            <h1 class="heading-2 is--funds">Fetching Requests....</h1>
            <p class="paragraph-1 is--hero"><span class="greenspan">Funds Available </span>: Loading...</p>
            <p class="paragraph-1 is--funds">
              <a href="#" class="inlink">Loading....</a>
            </p>
            <div class="buttonwrap is--adminfund">
              <a href="#" class="button is--1 w-button">Loading..</a>
              <a href="#" class="button is--1 is--reject w-button">Loading..</a>
            </div>
          </div>
        </div>
        
        
        
      </div>
    </div>
  </div>
  
  <section class="footer-subscribe wf-section">
    <div class="container-2">
      <div class="footer-form-two w-form">
        <form id="wf-form-Footer-Form-Two" name="wf-form-Footer-Form-Two" data-name="Footer Form Two" method="get" class="footer-form-container-two">
          <div class="heading-3 is--footer">Finfund.</div>
          <h1 class="heading-2">Request More Information</h1>
          <p class="paragraph-1 is--footer">A new era of public finance management.</p>
          <a href="#" class="button is--1 is--footer w-button">Contact Us</a>
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form.</div>
        </div>
      </div>
      <div class="footer-divider-two"></div>
      <div class="footer-wrapper-three">
        <div class="footer-block-three"><img src="images/FinFund---Logo---White_1FinFund---Logo---White.png" loading="lazy" alt="" class="image">
          <a href="index.html" class="footer-link-three">HOME</a>
          <a href="#" class="footer-link-three">OUR TEAM</a>
        </div>
        <div class="footer-social-block-three">
          <a href="#" class="footer-social-link-three w-inline-block"><img src="images/linkedin_1linkedin.png" loading="lazy" alt=""></a>
          <a href="#" class="footer-social-link-three w-inline-block"><img src="images/Facebook_1Facebook.png" loading="lazy" alt=""></a>
          <a href="#" class="footer-social-link-three w-inline-block"><img src="images/Instagram_1Instagram.png" loading="lazy" alt=""></a>
          <a href="#" class="footer-social-link-three w-inline-block"><img src="images/Youtube_1Youtube.png" loading="lazy" alt=""></a>
        </div>
      </div>
      <div class="footer-divider-two"></div>
      <div class="footer-bottom">
        <div class="footer-copyright">Â© 2022 Company name. All rights reserved</div>
        <div class="footer-legal-block">
          <a href="#" class="footer-legal-link">Terms Of Use</a>
          <a href="#" class="footer-legal-link">Privacy Policy</a>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=643280ea5127ec914ea8c775" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
<script type="module">
  

  

  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
  import { getDatabase, ref, onValue, set, push } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";
  

  
  




  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAiMYKv0YUdBFj1yPebYNzCKFrhXVGg_lc",
    authDomain: "finfund-2.firebaseapp.com",
    projectId: "finfund-2",
    storageBucket: "finfund-2.appspot.com",
    messagingSenderId: "311977682904",
    appId: "1:311977682904:web:d431864c50de653a5df4ad",
    measurementId: "G-M3KRFZKZ3B"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const auth = getAuth();

  

  
  onAuthStateChanged(auth , function(user) {
  if (user) {
    // User is signed in.
    var username = user.displayName;
    var email = user.email;
    var walletaddress = user.photoURL;
    
    
    // Display the user's email in the dashboard
    document.getElementById("username").innerHTML = username;
    document.getElementById("email").innerHTML = email;
    document.getElementById("walletaddress").innerHTML = walletaddress;
  } else {
    // No user is signed in.
  }
});
  
  
    

  window.addEventListener('load', function() {
  const isLoggedIn = sessionStorage.getItem('isLoggedIn');
  if (!isLoggedIn) {
    // Redirect to login page
    location.href = './login.html';
  }
});

const logoutBtn = document.getElementById('logout');

logoutBtn.addEventListener('click', function() {
  signOut(auth).then(function() {
    // Clear user data from local storage
    localStorage.removeItem('user');
    
    // Remove isLoggedIn flag from sessionStorage
    sessionStorage.removeItem('isLoggedIn');

    // Redirect to login page
    location.href = './login.html';
  }).catch(function(error) {
    console.log(error);
  });
});

auth.onAuthStateChanged((user) => {
  if (user) {
    // User is logged in, fetch and load the requests
    loadUserRequests(user.uid);
  } else {
    // User is not logged in, redirect to the login page
    location.href = './login.html';
  }
});

function loadUserRequests(userId) {
const requestsRef = ref(database, "requests");
let yourData=[];
onValue(requestsRef, (snapshot) => {
  const requests = snapshot.val();

  // Clear the card container
  document.querySelector('#fundwrap').innerHTML = '';

  // Loop through the schemes and create cards for each one
  
  for (var key in requests) {
    if (requests.hasOwnProperty(key)) {
      
      var request = requests[key];

      

      if(request.userId === userId)
      {
      
      console.log("Inside First Loop");
      console.log(key);

      yourData.push(key);
      
      // Create a new HTML element for the card
      var requestcard = document.createElement('div');
      requestcard.classList.add('fund-requests');

      
      
      
      // Set the content of the card
      
      requestcard.innerHTML = `
      <div class="contentwrap"></div>
          <div class="headwrap is--adminfunds">
            <p class="paragraph-1 is--funds">
              <a href="#" class="inlink">${request.scheme}</a>
            </p>

            <p class="paragraph-1 is--funds">
              <a href="#" class="inlink">${request.requestStatus}</a>
            </p>

            <p class="paragraph-1 is--funds">
              <a href="#" class="inlink" id="${key}">${key}</a>
            </p>


            <h1 class="heading-2 is--funds" id="name">${request.name}</h1>

            <p class="paragraph-1 is--hero"><span class="greenspan">E-mail of the individual </span>: ${request.userEmail}</p>
            
            <p class="paragraph-1 is--hero"><span class="greenspan">Requested Amount </span>: ${request.fundAmount}</p>

            <p class="paragraph-1 is--funds">
              <a href="${request.document1Url}" class="inlink" target="_blank">View Document 1</a>
              <a href="${request.document2Url}" class="inlink" target="_blank">View Document 2</a>
              <a href="${request.document3Url}" class="inlink" target="_blank">View Document 3</a>
            </p>
            
          </div>
      `;

      
      
      //Add the card to the card container
      document.querySelector('#fundwrap').appendChild(requestcard);
      
      
        }
      


    }
  }

});
}
</script>
</html>